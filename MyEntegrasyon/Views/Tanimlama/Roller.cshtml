@using Microsoft.AspNetCore.Identity
@using MyEntegrasyon.Data.Entities

@inject SignInManager<AppUser> SignInManager
@inject UserManager<AppUser> UserManager
@inject RoleManager<AppRole> roleManager


@{

    var roller = roleManager.Roles.ToList();
    ViewBag.Title = "Roller";
}

<link rel="stylesheet" href="../assets/plugins/bootstrapv4/css/bootstrap.min.css">
<link rel="stylesheet" href="../assets/plugins/fontawesome512/css/fontawesome-all.min.css">
<link rel="stylesheet" href="../assets/plugins/fontawesome512/css/font-awesome-animation.min.css">
<link rel="stylesheet" href="../assets/plugins/perfectscrollbar/css/perfect-scrollbar.css">
<link rel="stylesheet" href="../assets/plugins/select2v353/css/select2.min.css">
<link rel="stylesheet" href="../assets/plugins/select2v353/css/select2-bootstrap.min.css">
<link rel="stylesheet" href="../assets/plugins/jqueryuiv112/jquery-ui.css">
<link rel="stylesheet" href="../assets/plugins/datatable/css/datatables.min.css">
<link rel="stylesheet" href="../assets/spanel/css/spanel.css">
<link rel="stylesheet" href="../assets/plugins/datatable/buttons/css/buttons.bootstrap4.min.css">



<div class="container-fluid p-4">


    <div class="row">
        <div class="col-md-12">
            <a asp-controller="Tanimlama" asp-action="RolEkle" class="btn btn-primary"> <span class="fa fa-plus"></span> Yeni Rol</a>
            <hr />
        </div>
    </div>



    <div class="card rounded-0">
        <div class="card-header"> <h3>@ViewBag.Title</h3></div>
        <div class="card-body">


            <table id="datatable" class="table mb-3">
                <thead>
                    <tr>
                        <th scope="col">#</th>
                        <th>ID</th>
                        <th>
                            Rol Adı
                        </th>
                        <th>
                            Açıklama
                        </th>

                        <th>İşlem</th>
                    </tr>
                </thead>
                <tbody>
                    @{
                        int Sayi = 0;
                    }
                    @if (roller != null)
                    {

                        @foreach (var item in roller)
                        {

                            Sayi = Sayi + 1;
                            <tr>
                                <th scope="row">@Sayi.ToString()</th>
                                <td>
                                    @item.Id.ToString()
                                </td>
                                <td>
                                    @item.Name!.ToString()
                                </td>
                                <td>
                                    @item.Description!.ToString()
                                </td>

                                <td width="150">


                                    <a asp-action="BuRoleAtanan" asp-route-id="@item.Id" asp-controller="Tanimlama" class="btn btn-warning btn-xs"><span class="glyphicon glyphicon-user"></span> Bu role atananlar </a>


                                </td>
                            </tr>
                        }
                    }
                </tbody>
            </table>

        </div>
    </div>
</div>


<script src="../assets/plugins/jqueryv321/jquery-3.2.1.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.3/umd/popper.min.js" integrity="sha384-vFJXuSJphROIrBnz7yo7oB41mKfc8JzQZiCq4NCceLEaO4IHwicKwpJf9c9IpFgh" crossorigin="anonymous"></script>
<script src="../assets/plugins/bootstrapv4/js/bootstrap.min.js"></script>
<script src="../assets/plugins/perfectscrollbar/js/perfect-scrollbar.min.js"></script>
<script src="../assets/plugins/jqueryfullscreen/jquery.fullscreen.min.js"></script>
<script src="../assets/plugins/jqueryuiv112/jquery-ui.js"></script>
<script src="../assets/plugins/pace/js/pace.min.js"></script>
<script src="../assets/spanel/js/portlet.js"></script>
<script src="../assets/plugins/datatable/js/datatables.min.js"></script>
<script src="../assets/plugins/datatable/buttons/js/buttons.html5.min.js"></script>
<script src="../assets/plugins/datatable/buttons/js/dataTables.buttons.min.js"></script>
<script src="../assets/plugins/datatable/buttons/js/jszip.min.js"></script>
<script src="../assets/plugins/datatable/buttons/js/pdfmake.min.js"></script>
<script src="../assets/plugins/datatable/buttons/js/vfs_fonts.js"></script>
<script src="../assets/plugins/datatable/buttons/js/buttons.print.min.js"></script>
<script src="../assets/plugins/select2v353/js/select2.full.min.js"></script>
<script src="../assets/spanel/js/spanel.js"></script>
<script>
    $(document).ready(function () {
        $('#datatable').DataTable({
            "dom": "<'row'<'col-sm-12 text-right mb-3'B>><'row'<'col-sm-6'l><'col-sm-6'f>>rtip",
            buttons: {
                name: 'primary',
                buttons: [
                    { extend: 'copyHtml5', className: 'btn btn-danger btn-sm', text: 'Kopyala' },
                    { extend: 'excelHtml5', className: 'btn btn-secondary btn-sm', text: 'Excel' },
                    { extend: 'csvHtml5', className: 'btn btn-primary btn-sm', text: 'CVS' },
                    { extend: 'pdfHtml5', className: 'btn btn-success btn-sm', text: 'PDF <i class="fa fa-file-pdf-o"></i>' },
                    {
                        extend: 'print', className: 'btn btn-danger btn-sm', text: 'Yazdır <i class="fa fa-print"></i>',
                        customize: function (win) {
                            $(win.document.body)
                                .css('font-size', '10pt')
                                .prepend(
                                    '<img src="http://ibb.co/heqCb7" style="position:absolute; top:0; left:0;" />'
                                );
                            $(win.document.body).find('table')
                                .addClass('compact')
                                .css('font-size', 'inherit');
                        }
                    }
                ]
            },
            "lengthMenu": [[1, 10, 25, 50, 100, -1], [1, 10, 25, 50, 100, "Hepsi"]],
            "iDisplayLength": 1,
            "pagingType": "full_numbers",
            "language": {
                "sDecimal": ",",
                "sEmptyTable": "Tabloda herhangi bir veri mevcut değil",
                "sInfo": "_TOTAL_ kayıttan _START_ - _END_ arasındaki kayıtlar gösteriliyor",
                "sInfoEmpty": "Kayıt yok",
                "sInfoFiltered": "(_MAX_ kayıt içerisinden bulunan)",
                "sInfoPostFix": "",
                "sInfoThousands": ".",
                "sLengthMenu": "Sayfada _MENU_ kayıt göster",
                "sLoadingRecords": "Yükleniyor...",
                "sProcessing": "İşleniyor...",
                "sSearch": "Ara:",
                "sZeroRecords": "Eşleşen kayıt bulunamadı",
                "oPaginate": {
                    "sFirst": "İlk",
                    "sLast": "Son",
                    "sNext": "Sonraki",
                    "sPrevious": "Önceki"
                },
                "oAria": {
                    "sSortAscending": ": artan sütun sıralamasını aktifleştir",
                    "sSortDescending": ": azalan sütun sıralamasını aktifleştir"
                }
            }
        });

        $('.dataTables_length select').select2({
            theme: "bootstrap",
            selectOnClose: true,
            language: "tr"
        });

        $('.dataTables_wrapper .dt-buttons').addClass('btn-group');


    });
</script>






